<!--
 * @Author: shaqsnake
 * @Email: shaqsnake@gmail.com
 * @Date: 2019-09-16 15:58:00
 * @LastEditTime: 2019-09-21 09:43:36
 * @Description: Acwing 843
 -->

# 843. n-皇后问题

## 题目

n-皇后问题是指将 n 个皇后放在 n∗n 的国际象棋棋盘上，使得皇后不能相互攻击到，即任意两个皇后都不能处于同一行、同一列或同一斜线上。

![](https://cdn.acwing.com/media/article/image/2019/06/08/19_860e00c489-1_597ec77c49-8-queens.png)

现在给定整数n，请你输出所有的满足条件的棋子摆法。

#### 输入格式

共一行，包含整数n。

#### 输出格式

每个解决方案占n行，每行输出一个长度为n的字符串，用来表示完整的棋盘状态。

其中”.”表示某一个位置的方格状态为空，”Q”表示某一个位置的方格上摆着皇后。

每个方案输出完成后，输出一个空行。

#### 数据范围

![](http://latex.codecogs.com/gif.latex?\\1%20\leq%20n%20\leq%209)

#### 输入样例：

```
4
```

#### 输出样例：

```
.Q..
...Q
Q...
..Q.

..Q.
Q...
...Q
.Q..

```

#### 样例解释

样例中，最小值为109=1+2+5+7+9+12+19+21+33。

## 题解

### 按行DFS

1. 根据题目要求每行只能有一个皇后，所以可以将皇后放置的过程抽象成按行进行搜索，在检索行时再遍历每一列和两个对角线；
2. 搜索过程中注意保存状态，回溯时同样要恢复状态；
3. 如果能顺利搜索完最后一行，说明此方案合法，输出方案。

注：棋盘的两个对角线可以用行列来表示，如第x行和第y列的对角线为 x + y 和 y - x。

### 按格DFS

思路与上面按行搜索类似，但按格子来搜索就需要在搜索时传递更多的状态，包括列和摆放皇后的总数。
